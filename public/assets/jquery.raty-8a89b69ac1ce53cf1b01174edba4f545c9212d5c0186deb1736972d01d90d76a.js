/*!
 * jQuery Raty - A Star Rating Plugin
 *
 * The MIT License
 *
 * @author  : Washington Botelho
 * @doc     : http://wbotelhos.com/raty
 * @version : 2.7.1
 *
 */
!function(t){"use strict";var e={init:function(a){return this.each(function(){this.self=t(this),e.destroy.call(this.self),this.opt=t.extend(!0,{},t.fn.raty.defaults,a),e._adjustCallback.call(this),e._adjustNumber.call(this),e._adjustHints.call(this),this.opt.score=e._adjustedScore.call(this,this.opt.score),"img"!==this.opt.starType&&e._adjustStarType.call(this),e._adjustPath.call(this),e._createStars.call(this),this.opt.cancel&&e._createCancel.call(this),this.opt.precision&&e._adjustPrecision.call(this),e._createScore.call(this),e._apply.call(this,this.opt.score),e._setTitle.call(this,this.opt.score),e._target.call(this,this.opt.score),this.opt.readOnly?e._lock.call(this):(this.style.cursor="pointer",e._binds.call(this))})},_adjustCallback:function(){for(var t=["number","readOnly","score","scoreName","target","path"],e=0;e<t.length;e++)"function"==typeof this.opt[t[e]]&&(this.opt[t[e]]=this.opt[t[e]].call(this))},_adjustedScore:function(t){return t?e._between(t,0,this.opt.number):t},_adjustHints:function(){if(this.opt.hints||(this.opt.hints=[]),this.opt.halfShow||this.opt.half)for(var t=this.opt.precision?10:2,e=0;e<this.opt.number;e++){var a=this.opt.hints[e];"[object Array]"!==Object.prototype.toString.call(a)&&(a=[a]),this.opt.hints[e]=[];for(var s=0;s<t;s++){var i=a[s],n=a[a.length-1];n===undefined&&(n=null),this.opt.hints[e][s]=i===undefined?n:i}}},_adjustNumber:function(){this.opt.number=e._between(this.opt.number,1,this.opt.numberMax)},_adjustPath:function(){this.opt.path=this.opt.path||"",this.opt.path&&"/"!==this.opt.path.charAt(this.opt.path.length-1)&&(this.opt.path+="/")},_adjustPrecision:function(){this.opt.half=!0},_adjustStarType:function(){var t=["cancelOff","cancelOn","starHalf","starOff","starOn"];this.opt.path="";for(var e=0;e<t.length;e++)this.opt[t[e]]=this.opt[t[e]].replace(".","-")},_apply:function(t){e._fill.call(this,t),t&&(t>0&&this.score.val(t),e._roundStars.call(this,t))},_between:function(t,e,a){return Math.min(Math.max(parseFloat(t),e),a)},_binds:function(){this.cancel&&(e._bindOverCancel.call(this),e._bindClickCancel.call(this),e._bindOutCancel.call(this)),e._bindOver.call(this),e._bindClick.call(this),e._bindOut.call(this)},_bindClick:function(){var a=this;a.stars.on("click.raty",function(s){var i=!0,n=a.opt.half||a.opt.precision?a.self.data("score"):this.alt||t(this).data("alt");a.opt.click&&(i=a.opt.click.call(a,+n,s)),(i||i===undefined)&&(a.opt.half&&!a.opt.precision&&(n=e._roundHalfScore.call(a,n)),e._apply.call(a,n))})},_bindClickCancel:function(){var t=this;t.cancel.on("click.raty",function(e){t.score.removeAttr("value"),t.opt.click&&t.opt.click.call(t,null,e)})},_bindOut:function(){var t=this;t.self.on("mouseleave.raty",function(a){var s=+t.score.val()||undefined;e._apply.call(t,s),e._target.call(t,s,a),e._resetTitle.call(t),t.opt.mouseout&&t.opt.mouseout.call(t,s,a)})},_bindOutCancel:function(){var t=this;t.cancel.on("mouseleave.raty",function(a){var s=t.opt.cancelOff;if("img"!==t.opt.starType&&(s=t.opt.cancelClass+" "+s),e._setIcon.call(t,this,s),t.opt.mouseout){var i=+t.score.val()||undefined;t.opt.mouseout.call(t,i,a)}})},_bindOver:function(){var t=this,a=t.opt.half?"mousemove.raty":"mouseover.raty";t.stars.on(a,function(a){var s=e._getScoreByPosition.call(t,a,this);e._fill.call(t,s),t.opt.half&&(e._roundStars.call(t,s,a),e._setTitle.call(t,s,a),t.self.data("score",s)),e._target.call(t,s,a),t.opt.mouseover&&t.opt.mouseover.call(t,s,a)})},_bindOverCancel:function(){var t=this;t.cancel.on("mouseover.raty",function(a){var s=t.opt.path+t.opt.starOff,i=t.opt.cancelOn;"img"===t.opt.starType?t.stars.attr("src",s):(i=t.opt.cancelClass+" "+i,t.stars.attr("class",s)),e._setIcon.call(t,this,i),e._target.call(t,null,a),t.opt.mouseover&&t.opt.mouseover.call(t,null)})},_buildScoreField:function(){return t("<input />",{name:this.opt.scoreName,type:"hidden"}).appendTo(this)},_createCancel:function(){var e=this.opt.path+this.opt.cancelOff,a=t("<"+this.opt.starType+" />",{title:this.opt.cancelHint,"class":this.opt.cancelClass});"img"===this.opt.starType?a.attr({src:e,alt:"x"}):a.attr("data-alt","x").addClass(e),"left"===this.opt.cancelPlace?this.self.prepend("&#160;").prepend(a):this.self.append("&#160;").append(a),this.cancel=a},_createScore:function(){var a=t(this.opt.targetScore);this.score=a.length?a:e._buildScoreField.call(this)},_createStars:function(){for(var a=1;a<=this.opt.number;a++){var s=e._nameForIndex.call(this,a),i={alt:a,src:this.opt.path+this.opt[s]};"img"!==this.opt.starType&&(i={"data-alt":a,"class":i.src}),i.title=e._getHint.call(this,a),t("<"+this.opt.starType+" />",i).appendTo(this.self),this.opt.space&&this.self.append(a<this.opt.number?"&#160;":"")}this.stars=this.self.children(this.opt.starType)},_error:function(e){t(this).text(e),t.error(e)},_fill:function(t){for(var a=0,s=1;s<=this.stars.length;s++){var i,n=this.stars[s-1];if(this.opt.iconRange&&this.opt.iconRange.length>a){var o=this.opt.iconRange[a];i=e._getRangeIcon.call(this,o,s),s<=o.range&&e._setIcon.call(this,n,i),s===o.range&&a++}else i=this.opt[s<=t?"starOn":"starOff"],e._setIcon.call(this,n,i)}},_getHint:function(t,a){if(0!==t&&!t)return this.opt.noRatedMsg;var s=this.opt.hints[t-1]||this.opt.hints[0],i=s[0];return a&&this.opt.precision?i=e._getPrecisionHint.call(this,s,t,a):t%1!=0&&(i=s[this.opt.halfShow?1:0]),""===i?"":i||t},_getPrecisionHint:function(t,a,s){return t[e._getFirstDecimal.call(this,a)?e._getDecimalNameFromPosition.call(this,s):0]||t[0]},_getFirstDecimal:function(t){var e=t.toString().split(".")[1];return e?parseInt(e.charAt(0),10):0},_getRangeIcon:function(t,e){return this.opt[e<=t.range?"starOn":"starOff"]},_getScoreByPosition:function(a,s){var i=parseInt(s.alt||s.getAttribute("data-alt"),10);if(this.opt.half){var n=e._getWidth.call(this),o=((a.pageX-t(s).offset().left)/n).toFixed(2),r=.5;this.opt.precision&&(r=.1),i=i-1+r+o}return i},_getWidth:function(){return this.stars[0].width||parseFloat(this.stars.eq(0).css("font-size"))},_lock:function(){var t=this.score.val();this.style.cursor="",this.title=e._getHint.call(this,+t),this.score.attr("readonly","readonly"),this.stars.attr("title",this.title),this.cancel&&this.cancel.hide()},_nameForIndex:function(t){return t%2==0?"starOff":"starOn"},_resetTitle:function(){for(var t=1;t<=this.stars.length;t++)this.stars[t-1].title=e._getHint.call(this,t)},_roundStars:function(t,a){var s=e._nameForIndex.call(this,Math.ceil(t));if(t%1!=0){var i=e._getWidth.call(this),n=1===(a?e._getPosition.call(this,a,i):e._getHalfWidth.call(this,i))?-1:1;s=e._nameForIndex.call(this,Math.ceil(t)+n)}e._setIcon.call(this,this.stars[Math.ceil(t)-1],s)},_setIcon:function(e,a){e.src=this.opt.path+a,"img"!==this.opt.starType&&t(e).attr("class",a)},_setTarget:function(a,s){if(this.opt.target){var i=t(this.opt.target);i.length||e._error.call(this,"Target selector invalid or missing!");a=e._getHint.call(this,a,s);i="hint"===this.opt.targetType?i.html(a):-1!==this.opt.targetFormat.indexOf("{score}")?i.html(this.opt.targetFormat.replace("{score}",a)):i.val(a)}},_target:function(a,s){if(this.opt.target){var i=t(this.opt.target);i.length||e._error.call(this,"Target selector invalid or missing!");var n=e._getHint.call(this,a,s);"hint"===this.opt.targetType?i.html(n):-1!==this.opt.targetFormat.indexOf("{score}")?i.html(this.opt.targetFormat.replace("{score}",n)):i.val(a)}},_unbind:function(){this.self.off(".raty"),this.cancel.off(".raty"),this.stars.off(".raty")},destroy:function(){e._unbind.call(this),this.self.removeData("options").removeData("score").removeClass("raty").empty()}};t.fn.raty=function(a){return e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist on jQuery.raty"):e.init.apply(this,arguments)},t.fn.raty.defaults={cancel:!1,cancelClass:"raty-cancel",cancelHint:"Cancel this rating!",cancelOff:"cancel-off.png",cancelOn:"cancel-on.png",cancelPlace:"left",click:undefined,half:!1,halfShow:!0,hints:["bad","poor","regular","good","gorgeous"],iconRange:undefined,mouseout:undefined,mouseover:undefined,noRatedMsg:"Not rated yet!",number:5,numberMax:20,path:undefined,precision:!1,readOnly:!1,round:{down:.25,full:.6,up:.76},score:undefined,scoreName:"score",single:!1,space:!0,starHalf:"star-half.png",starOff:"star-off.png",starOn:"star-on.png",starType:"img",target:undefined,targetFormat:"{score}",targetKeep:!1,targetScore:undefined,targetText:"",targetType:"hint",width:undefined}}(jQuery);